var gt=Object.defineProperty;var T=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;var E=(o,a,l)=>a in o?gt(o,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[a]=l,W=(o,a)=>{for(var l in a||(a={}))_t.call(a,l)&&E(o,l,a[l]);if(T)for(var l of T(a))bt.call(a,l)&&E(o,l,a[l]);return o};var C=(o,a,l)=>new Promise((i,r)=>{var L=m=>{try{d(l.next(m))}catch(M){r(M)}},g=m=>{try{d(l.throw(m))}catch(M){r(M)}},d=m=>m.done?i(m.value):Promise.resolve(m.value).then(L,g);d((l=l.apply(o,a)).next())});import{c as n,I as $,d as wt,r as p,a as ht,b as J,m as yt,p as Ct,q as Ot,s as xt,i as q,w as s,h as c,f as t,k as v,D as Lt,t as Mt,v as kt,M as Pt,A as Q,l as P,x as Vt,e as H,j as X,y as Ht,z as O,B as zt,u as St,o as x,_ as Bt}from"./index-D3AlzqxX.js";import{a as at,U as Y}from"./axios-T7t-lN1I.js";var Ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};function K(o){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},i=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(l).filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable}))),i.forEach(function(r){Ft(o,r,l[r])})}return o}function Ft(o,a,l){return a in o?Object.defineProperty(o,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[a]=l,o}var j=function(a,l){var i=K({},a,l.attrs);return n($,K({},i,{icon:Ut}),null)};j.displayName="LogoutOutlined";j.inheritAttrs=!1;var Zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"};function tt(o){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},i=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(l).filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable}))),i.forEach(function(r){$t(o,r,l[r])})}return o}function $t(o,a,l){return a in o?Object.defineProperty(o,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[a]=l,o}var I=function(a,l){var i=tt({},a,l.attrs);return n($,tt({},i,{icon:Zt}),null)};I.displayName="PictureOutlined";I.inheritAttrs=!1;var jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"};function et(o){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},i=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(l).filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable}))),i.forEach(function(r){It(o,r,l[r])})}return o}function It(o,a,l){return a in o?Object.defineProperty(o,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[a]=l,o}var D=function(a,l){var i=et({},a,l.attrs);return n($,et({},i,{icon:jt}),null)};D.displayName="ThunderboltOutlined";D.inheritAttrs=!1;const Dt=o=>C(void 0,null,function*(){try{return yield at.post("/v1/design/generate-image",JSON.stringify(o))}catch(a){throw console.error("请求数据异常:",a),a}}),Rt=o=>C(void 0,null,function*(){try{return yield at.post("/v1/design/prompt-rewrite",JSON.stringify(o))}catch(a){throw console.error("请求数据异常:",a),a}}),Nt={class:"user-info"},At={class:"user-avatar-name"},Gt={class:"user-name"},Tt={key:0,class:"sider-content"},Et={class:"prompt-input-container"},Wt={class:"prompt-buttons"},Jt={width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{"margin-right":"6px"}},qt={key:0,class:"custom-ratio-container"},Qt={class:"custom-ratio-inputs"},Xt={key:1,class:"placeholder"},Yt={class:"placeholder-icon-container"},Kt=wt({__name:"ImageGenerator",setup(o){const a=St(),l=p({name:""}),i=p(!1),r=ht({prompt:"",aspectRatio:"1:1"}),L=p(!1),g=p(1024),d=p(1024),m=J(()=>g.value&&d.value&&g.value>0&&d.value>0),M=()=>{if(!m.value){O.warning("请输入有效的宽度和高度！");return}r.aspectRatio=`${g.value}*${d.value}`,O.success(`已应用自定义比例 ${g.value}*${d.value}`),r.aspectRatio=`${g.value}*${d.value}`},f=p(!1),w=p(null),lt=p(null),z=p(!1),V=p(!1),S=p(window.innerWidth<992),B=J(()=>S.value?0:80),U=()=>{S.value=window.innerWidth<992};function nt(){return C(this,null,function*(){try{i.value=!0;const u=yield Rt({prompt:r.prompt}),{data:{successful:e,resultHint:b,resultValue:k}}=u;e||O.error(b),r.prompt=k}catch(u){console.log(u)}finally{i.value=!1}})}yt(()=>{const u=localStorage.getItem("Authorization");if(u){const b=Ct(u).userName;l.value.name=b}window.addEventListener("resize",U),U()}),Ot(()=>{window.removeEventListener("resize",U)}),xt(S,u=>{u&&z.value,console.log("isMobile changed:",u,"Collapsed Width:",B.value)});const ot=u=>{u.target.value!=="custom"&&(L.value=!1)},st=u=>{V.value=u},rt=()=>C(this,null,function*(){if(!r.prompt.trim()){O.warning("请输入提示词！");return}f.value=!0,w.value=null,lt.value=null,V.value=!1;try{f.value=!0;const u=yield Dt(W({},r)),{data:{successful:e,resultHint:b,resultValue:k}}=u;e||O.error(b),w.value=k}catch(u){console.log(u)}finally{f.value=!1}}),it=u=>{switch(u.key){case"profile":O.info("待实现)");break;case"logout":let e;zt.confirm({title:"确认退出?",content:"您确定要退出登录吗？",okText:"确认退出",cancelText:"取消",onOk(){return C(this,null,function*(){localStorage.removeItem("Authorization"),yield a.push("/login")})},onCancel(){console.log("取消退出")}});break}};return(u,e)=>{const b=c("a-avatar"),k=c("a-layout-header"),ut=c("a-typography-title"),ct=c("a-textarea"),F=c("a-button"),Z=c("a-form-item"),R=c("a-divider"),h=c("a-radio-button"),y=c("a-tooltip"),dt=c("a-radio-group"),N=c("a-input-number"),pt=c("a-form"),vt=c("a-layout-sider"),A=c("a-image"),mt=c("a-spin"),ft=c("a-layout-content"),G=c("a-layout");return x(),q(G,{class:"app-layout"},{default:s(()=>[n(k,{class:"app-header"},{default:s(()=>[e[8]||(e[8]=t("div",{class:"logo"},[t("svg",{class:"logo-icon",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M16 2C8.268 2 2 8.268 2 16C2 23.732 8.268 30 16 30C23.732 30 30 23.732 30 16C30 8.268 23.732 2 16 2Z",fill:"url(#paint0_linear)"}),t("path",{d:"M22 10C22 12.2091 20.2091 14 18 14C15.7909 14 14 12.2091 14 10C14 7.79086 15.7909 6 18 6C20.2091 6 22 7.79086 22 10Z",fill:"white"}),t("path",{d:"M10 18C10 20.2091 8.20914 22 6 22C3.79086 22 2 20.2091 2 18C2 15.7909 3.79086 14 6 14C8.20914 14 10 15.7909 10 18Z",fill:"white"}),t("path",{d:"M26 22C28.2091 22 30 20.2091 30 18C30 15.7909 28.2091 14 26 14C23.7909 14 22 15.7909 22 18C22 20.2091 23.7909 22 26 22Z",fill:"white"}),t("path",{d:"M18 30C20.2091 30 22 28.2091 22 26C22 23.7909 20.2091 22 18 22C15.7909 22 14 23.7909 14 26C14 28.2091 15.7909 30 18 30Z",fill:"white"}),t("defs",null,[t("linearGradient",{id:"paint0_linear",x1:"2",y1:"2",x2:"30",y2:"30",gradientUnits:"userSpaceOnUse"},[t("stop",{"stop-color":"#1890FF"}),t("stop",{offset:"1","stop-color":"#39DBFF"})])])]),t("span",{class:"logo-text"},"ImagesGPT")],-1)),e[9]||(e[9]=t("div",{class:"nav-links"},[t("a",{class:"nav-link active"},"图像生成"),t("a",{class:"nav-link"},"我的作品")],-1)),t("div",Nt,[n(v(Lt),{placement:"bottomRight"},{overlay:s(()=>[n(v(Pt),{onClick:it,class:"user-dropdown-menu"},{default:s(()=>[n(v(Q),{key:"profile"},{icon:s(()=>[n(v(Y))]),default:s(()=>[e[6]||(e[6]=P(" 个人中心 "))]),_:1}),n(v(Vt)),n(v(Q),{key:"logout"},{icon:s(()=>[n(v(j))]),default:s(()=>[e[7]||(e[7]=P(" 退出登录 "))]),_:1})]),_:1})]),default:s(()=>[t("div",At,[n(b,{class:"user-avatar",size:32,style:{"background-color":"#1890ff"}},{icon:s(()=>[n(v(Y))]),_:1}),t("span",Gt,Mt(l.value.name),1),n(v(kt),{class:"dropdown-arrow"})])]),_:1})])]),_:1}),n(G,{class:"main-content-layout"},{default:s(()=>[n(vt,{width:"340",theme:"light",class:"parameter-sider",collapsed:z.value,collapsible:"",breakpoint:"lg","collapsed-width":B.value,trigger:null},{default:s(()=>[!z.value||B.value!==0?(x(),H("div",Tt,[n(ut,{level:5,class:"sider-title"},{default:s(()=>e[10]||(e[10]=[t("span",{class:"sider-title-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"url(#paint0_linear)"}),t("path",{d:"M13 7H11V11H7V13H11V17H13V13H17V11H13V7Z",fill:"url(#paint1_linear)"}),t("defs",null,[t("linearGradient",{id:"paint0_linear",x1:"2",y1:"2",x2:"22",y2:"22",gradientUnits:"userSpaceOnUse"},[t("stop",{"stop-color":"#1890FF"}),t("stop",{offset:"1","stop-color":"#39DBFF"})]),t("linearGradient",{id:"paint1_linear",x1:"7",y1:"7",x2:"17",y2:"17",gradientUnits:"userSpaceOnUse"},[t("stop",{"stop-color":"#1890FF"}),t("stop",{offset:"1","stop-color":"#39DBFF"})])])])],-1),t("span",{class:"sider-title-text"},"AI 图像生成",-1)])),_:1}),n(pt,{layout:"vertical",model:r,class:"sider-form"},{default:s(()=>[n(Z,{label:"核心提示词 (Prompt)",class:"form-label-strong"},{default:s(()=>[e[13]||(e[13]=t("div",{class:"label-description"},"描述您想要生成的图像内容，越详细越好",-1)),t("div",Et,[n(ct,{value:r.prompt,"onUpdate:value":e[0]||(e[0]=_=>r.prompt=_),placeholder:"输入图像描述，例如：一个印有插画的马克杯，质感温润，柔和的光线，高清细节",rows:5,disabled:f.value,"show-count":"",maxlength:1e3,class:"custom-textarea"},null,8,["value","disabled"]),t("div",Wt,[n(F,{type:"primary",loading:i.value,onClick:nt,class:"enhance-button"},{default:s(()=>[(x(),H("svg",Jt,e[11]||(e[11]=[t("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"white"},null,-1),t("path",{d:"M15.88 8.29L10 14.17L8.12 12.29C7.73 11.9 7.1 11.9 6.71 12.29C6.32 12.68 6.32 13.31 6.71 13.7L9.3 16.29C9.69 16.68 10.32 16.68 10.71 16.29L17.3 9.7C17.69 9.31 17.69 8.68 17.3 8.29C16.91 7.9 16.27 7.9 15.88 8.29Z",fill:"white"},null,-1)]))),e[12]||(e[12]=P(" 提示词增强 "))]),_:1},8,["loading"])])])]),_:1}),n(R,{class:"custom-divider"}),n(Z,{label:"图像比例 (Aspect Ratio)",class:"form-label-strong"},{default:s(()=>[n(dt,{value:r.aspectRatio,"onUpdate:value":e[2]||(e[2]=_=>r.aspectRatio=_),"button-style":"solid",disabled:f.value,class:"ratio-group",onChange:ot},{default:s(()=>[n(y,{title:"方形 (1:1)"},{default:s(()=>[n(h,{value:"1:1",class:"ratio-button"},{default:s(()=>e[14]||(e[14]=[t("span",{class:"ratio-text"},"1:1",-1)])),_:1})]),_:1}),n(y,{title:"宽屏 (16:9)"},{default:s(()=>[n(h,{value:"16:9",class:"ratio-button"},{default:s(()=>e[15]||(e[15]=[t("span",{class:"ratio-text"},"16:9",-1)])),_:1})]),_:1}),n(y,{title:"竖屏 (9:16)"},{default:s(()=>[n(h,{value:"9:16",class:"ratio-button"},{default:s(()=>e[16]||(e[16]=[t("span",{class:"ratio-text"},"9:16",-1)])),_:1})]),_:1}),n(y,{title:"标准 (4:3)"},{default:s(()=>[n(h,{value:"4:3",class:"ratio-button"},{default:s(()=>e[17]||(e[17]=[t("span",{class:"ratio-text"},"4:3",-1)])),_:1})]),_:1}),n(y,{title:"竖向标准 (3:4)"},{default:s(()=>[n(h,{value:"3:4",class:"ratio-button"},{default:s(()=>e[18]||(e[18]=[t("span",{class:"ratio-text"},"3:4",-1)])),_:1})]),_:1}),n(y,{title:"自定义比例"},{default:s(()=>[n(h,{value:"custom",onClick:e[1]||(e[1]=_=>L.value=!0),class:"ratio-button custom-button"},{default:s(()=>e[19]||(e[19]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"custom-icon"},[t("path",{d:"M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z",fill:"currentColor"})],-1),t("span",{class:"ratio-text"},"自定义",-1)])),_:1})]),_:1})]),_:1},8,["value","disabled"]),L.value?(x(),H("div",qt,[t("div",Qt,[n(N,{value:g.value,"onUpdate:value":e[3]||(e[3]=_=>g.value=_),min:1,max:4096,disabled:f.value,placeholder:"宽度",class:"custom-dimension-input"},null,8,["value","disabled"]),e[20]||(e[20]=t("span",{class:"dimension-separator"},"×",-1)),n(N,{value:d.value,"onUpdate:value":e[4]||(e[4]=_=>d.value=_),min:1,max:4096,disabled:f.value,placeholder:"高度",class:"custom-dimension-input"},null,8,["value","disabled"])]),n(F,{type:"primary",onClick:M,disabled:f.value||!m.value,class:"apply-ratio-button"},{default:s(()=>e[21]||(e[21]=[P(" 应用 ")])),_:1},8,["disabled"])])):X("",!0)]),_:1}),n(R,{class:"custom-divider"}),n(Z,null,{default:s(()=>[n(F,{type:"primary",onClick:rt,loading:f.value,block:"",size:"large",class:"generate-button gradient-btn"},{icon:s(()=>[n(v(D))]),default:s(()=>[e[22]||(e[22]=P(" 立即生成 "))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):X("",!0)]),_:1},8,["collapsed","collapsed-width"]),n(ft,{class:"image-content-area"},{default:s(()=>[e[25]||(e[25]=t("div",{class:"content-header"},[t("div",{class:"content-title"},[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L14.5 12L19 18H5L8.5 13.5Z",fill:"url(#paint0_linear_image)"}),t("defs",null,[t("linearGradient",{id:"paint0_linear_image",x1:"3",y1:"3",x2:"21",y2:"21",gradientUnits:"userSpaceOnUse"},[t("stop",{"stop-color":"#1890FF"}),t("stop",{offset:"1","stop-color":"#39DBFF"})])])]),t("span",null,"图像预览")])],-1)),n(mt,{spinning:f.value,tip:"正在生成图像，请稍候...",size:"large",wrapperClassName:"spin-wrapper"},{default:s(()=>[t("div",{class:Ht(["image-display-container",{"has-image":!!w.value}])},[w.value?(x(),q(A,{key:0,src:w.value,alt:"生成的图片",class:"generated-image",preview:{visible:!1},onClick:e[5]||(e[5]=_=>V.value=!0)},null,8,["src"])):(x(),H("div",Xt,[t("div",Yt,[n(v(I),{class:"placeholder-icon"})]),e[23]||(e[23]=t("p",null,"您的图像将在此呈现",-1)),e[24]||(e[24]=t("span",null,"请在左侧输入描述并设置参数",-1))]))],2)]),_:1},8,["spinning"])]),_:1})]),_:1}),n(A,{preview:{visible:V.value,onVisibleChange:st,src:w.value||void 0},style:{display:"none"}},null,8,["preview"])]),_:1})}}}),le=Bt(Kt,[["__scopeId","data-v-6d364a6d"]]);export{le as default};
